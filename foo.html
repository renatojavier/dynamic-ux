<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<style type="text/css">
			#mainCanvas {
			    position: absolute;
			    top: 0;
			    bottom: 0;
			    left: 0;
			    right: 0;
			    width: 400;
			    height: 400;
			}

			#mainVideo {
			    position: absolute;
			    top: 300;
			    left: 300;
			    margin: -50px 0 0 -50px;
			}
		</style>

	</head>
	<body>

		<video id="mainVideo" autoplay controls="true" muted="true" alt="" poster="">
	        <source type="video/mp4" src="assets/wmb/images/preview.mp4" />
	        <source type="video/webm" src="assets/wmb/images/preview.webm" />
	        <source type="video/ogg" src="assets/wmb/images/preview.ogv" />
	    </video>
	    <canvas id="mainCanvas" />
		<script type="text/javascript">
			// reference to canvas and context
			var canvas=document.getElementById("mainCanvas");
			var context=canvas.getContext("2d");
			var cw,ch;

			// reference to video element
			var v = document.getElementById('mainVideo');

			// wait until video metadata is loaded
			v.addEventListener( "loadedmetadata", function(e){

			    // set the canvas size to the video size
			    cw=canvas.width=v.videoWidth;
			    ch=canvas.height=v.videoHeight;

			    // listen for when user presses play
			    v.addEventListener('play', function(){
			        // start loop that displays video frames on canvas
			        requestAnimationFrame(animate);
			    },false);


			}, false );   

			// loop that displays video frames on canvas
			function animate(time){

			    // stop the loop if user stops video
			    if(v.paused || v.ended){ return; }

			    // draw the 1 current video frame on the canvas
			    context.drawImage(v,0,0,cw,ch);

			    // also draw your image on the canvas
			    //context.drawImage(img,0,0);

			    // request another loop 
			    requestAnimationFrame(animate);

			}
		</script>
	</body>
</html>